<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.css" />



  <link rel="stylesheet" href="./style.css">

  <style>
    header {
      height: 60vh;
      min-height: 400px;
      background: linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%), url('./media/mac4.jpg');
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
    }

    .fondo-footer {
      background: linear-gradient(180deg, rgba(255, 255, 255, 1) 0%, rgba(198, 209, 216, 1) 76%, rgba(140, 163, 177, 1) 100%);
    }
  </style>
  <title>Presto</title>
</head>

<body>

  <!--  Side menu mobile  -->

  <div id="mobileMenu">
    <ul class="list-unstyled text-center py-5">
      <li class="mt-5"><a class="text-decoration-none text-reset" href="">Categorias</a></li>
      <li class="mt-4"><a class="text-decoration-none text-reset" href="">Ver anuncios</a></li>
      <li class="mt-4"><a class="text-decoration-none text-reset" href="">Subir anuncio</a></li>
      <li class="mt-4"><a class="text-decoration-none text-reset" href="">Newsletter</a></li>
      <li class="mt-4"><a class="text-decoration-none text-reset" href="">Contacto</a></li>
    </ul>
  </div>

  <!-- navbar -->

  <nav id="navbar" class="d-flex justify-content-between p-3 align-items-center fixed-top bg-light">
    <div><i id="logo" class="fab fa-pied-piper-pp fa-3x text-main"></i></div>
    <div class="d-none d-md-block">
      <button class="btn text-transform"><a class="text-decoration-none text-reset mx-3 dropdown-toggle" href=""
          id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">Categorias</a>
        <ul class="dropdown-menu p-3" aria-labelledby="dropdownMenuButton1">
          <li><a class="dropdown-item" href="#">Moviles</a></li>
          <li><a class="dropdown-item" href="#">Coches</a></li>
          <li><a class="dropdown-item" href="#">Lavadoras</a></li>
          <li><a class="dropdown-item" href="#">Ordenadores</a></li>
          <li><a class="dropdown-item" href="#">Ropas</a></li>
          <li><a class="dropdown-item" href="#">Musicos</a></li>
        </ul>
      </button>
      <button class="btn text-transform"><a class="text-decoration-none text-reset  mx-3" href="">Anuncios</a></button>
      <button class="btn text-transform"><a class="text-decoration-none text-reset  mx-3" href="">Contacto</a></button>
    </div>
    <div>
      <button class="btn text-transform"><i class="fas fa-shopping-bag"></i></button>
      <button class="btn text-transform"><i class="fas fa-user"></i></button>
      <button class="btn text-transform"><i class="fas fa-users-cog"></i></button>
      <button id="sidebar" class="btn text-transform d-md-none"><i class="fas fa-bars"></i></button>
    </div>
  </nav>


  <header>
    <div class="container-fluid h-100">
      <div class="row h-100 align-items-center">
        <div class="col-12 px-5">
          <h2 class="text-main">Todos los anuncios</h2>
        </div>
      </div>
    </div>
  </header>


  <div class="container my-5 py-5">
    <div class="row">
      <div class="col-12 col-md-3">
        <h5 class="text-main">Filtros por:</h5>
        <div>
          <p>
            <button class="btn bordo-subscribe rounded-0" type="button" data-bs-toggle="collapse"
              data-bs-target="#categoriesWrapper" aria-expanded="false" aria-controls="categoriesWrapper">
              <span class="text-accent">Filtra por Categorias</span>
            </button>
          </p>
          <div class="collapse" id="categoriesWrapper">

          </div>
        </div>
        <div>
          <p>
            <button class="btn bordo-subscribe rounded-0" type="button" data-bs-toggle="collapse"
              data-bs-target="#priceWrapper" aria-expanded="false" aria-controls="priceWrapper">
              <span class="text-accent">Filtra por Precio</span>
            </button>
          </p>
          <div class="collapse" id="priceWrapper">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="price" id="priceCheck1">
              <label class="form-check-label" for="priceCheck1">
                <p>0€ - 100€</p>
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="price" id="priceCheck2" checked>
              <label class="form-check-label" for="priceCheck2">
                <p>100€ - 300€</p>
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="price" id="priceCheck3" checked>
              <label class="form-check-label" for="priceCheck3">
                <p>300€ - 600€</p>
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="price" id="priceCheck4" checked>
              <label class="form-check-label" for="priceCheck4">
                <p>600€ - 1000€</p>
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="price" id="priceCheck5" checked>
              <label class="form-check-label" for="priceCheck5">
                <p>todos los anuncios</p>
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-9">
        <div id="productsWrapper" class="row">

        </div>
      </div>
    </div>
  </div>



  <!-- form contact -->
  <div class="container pb-5 text-center">
    <div class="row justify-content-center align-items-center">
      <div class="col-6">
        <div class="card p-5 border-0 rounded-5">
          <form>
            <h2 class="text-main">Envia tu correo para ser contactado</h2>
            <div class="mb-3">
              <label for="exampleInputEmail1" class="form-label text-sec fw-bolder">correo</label>
              <input type="mail" class="form-control border-0 bordo" id="exampleInputEmail1"
                aria-describedby="emailHelp">
            </div>
            <div class="mb-3">
              <label class="text-sec fw-bolder">Mensaje</label>
              <textarea class="form-control border-0 bordo"></textarea>
            </div>
            <div class="mb-3 d-block">
              <button class="btn-custom text-decoration-none border-0">Contacta<i class="fas fa-paper-plane ms-2"></i>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- footer -->

  <footer class="fondo-footer">
    <div class="container">
      <div class="row pt-5">
        <div class="col-12 col-md-4 px-5">
          <div><i id="logo" class="fab fa-pied-piper-pp fa-4x text-accent"></i></div>
          <h2 class="text-accent">Presto</h2>
        </div>
        <div class="col-12 col-md-4 d-flex align-items-center">
          <div class="d-none d-md-block">
            <button class="btn "><a class="text-decoration-none text-reset mx-2 borderLeftRight"
                href="">Categorias</a></button>
            <button class="btn "><a class="text-decoration-none text-reset  mx-2 borderLeftRight"
                href="">Anuncios</a></button>
            <button class="btn "><a class="text-decoration-none text-reset  mx-2 borderLeftRight"
                href="">Contacto</a></button>
          </div>
        </div>
        <div class="col-12 col-md-4 d-flex align-items-center justify-content-center">
          <div>
            <div class="input-group mb-3">
              <input type="email" class="form-control border-0 bordo-subscribe bg-transparent"
                placeholder="Tu correo..." aria-label="Recipient's username" aria-describedby="button-addon2">
              <button class="btn border-0" type="button" id="button-addon2">
                <i class="fas fa-paper-plane text-accent"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="row pt-5 px-3">
        <div class="col-12 col-md-6">
          <p class="text-muted" style="font-size: 13px;">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aut
            facere id quo. Labore recusandae culpa officia, fuga Lorem ipsum dolor sit amet consectetur, adipisicing
            elit.
            Animi totam illum mollitia laborum? Dolor fugit perspicia</p>
          <br>
          <p class="text-muted" style="font-size: 13px;">@Copyright(2021) by NicoGaspa</p>
        </div>
        <div class="col-12 col-md-6">
          <div class="d-flex justify-content-around py-5 my-5">
            <i class="fab fa-facebook-square text-accent"></i>
            <i class="fab fa-twitter-square text-accent"></i>
            <i class="fab fa-instagram-square text-accent"></i>
            <i class="fab fa-linkedin text-accent"></i>
          </div>
        </div>
      </div>
    </div>
  </footer>



  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous">
  </script>
  <script src="https://kit.fontawesome.com/4885c16ff9.js" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/swiper/swiper-bundle.js"></script>
  <script src="./main.js"></script>

  <script>
    let categoriesWrapper = document.querySelector('#categoriesWrapper')
    let productsWrapper = document.querySelector('#productsWrapper')
    let priceWrapper = document.querySelector('#priceWrapper')


    fetch('./products.json')
      .then(response => response.json())
      .then(products => {

        let categorias = Array.from(new Set(products.map(el => {
          return el.category
        }))).sort();
        categorias.forEach(el => {
          let div = document.createElement('div')
          div.classList.add('form-check')
          div.innerHTML =
            `
                  <input class="form-check-input" type="radio" name="categories" id="${el}">
                  <label class="form-check-label" for="${el}">
                    ${el}
                  </label>
              `
          categoriesWrapper.appendChild(div);
        })

        let todasLasCategorias = document.createElement('div')
        todasLasCategorias.classList.add('form-check', 'mt-2')
        todasLasCategorias.innerHTML =
          `
              <input class="form-check-input" type="radio" name="categories" id="all">
              <label class="form-check-label" for="all">
                todas las categorias
              </label>
            `
        categoriesWrapper.appendChild(todasLasCategorias);


        let filters = document.querySelectorAll('[name="categories"]')
        filters.forEach( el =>{
          el.addEventListener('click', ()=>{
            let checked = el.id;
            let filteredProds = products.filter(el => {
             return el.category == checked;
            })
            showProds(filteredProds);
          })
        })

        let all = document.querySelector('#all')
        all.addEventListener('click', () =>{
          showProds(products);
        })
        

        let priceCheck1 = document.querySelector('#priceCheck1')
        priceCheck1.addEventListener('click', ()=>{
          let filterCheck1 = products.filter( el => el.price <= 100).sort((a,b) => a.price - b.price);
          showProds(filterCheck1);
        })

        let priceCheck2 = document.querySelector('#priceCheck2')
        priceCheck2.addEventListener('click', ()=>{
          let filterCheck2 = products.filter( el => el.price > 100 && el.price <= 300).sort((a,b) => a.price - b.price);
          showProds(filterCheck2);
        })

        let priceCheck3 = document.querySelector('#priceCheck3')
        priceCheck3.addEventListener('click', ()=>{
          let filterCheck3 = products.filter( el => el.price > 300 && el.price <= 600).sort((a,b) => a.price - b.price);
          showProds(filterCheck3);
        })

        let priceCheck4 = document.querySelector('#priceCheck4')
        priceCheck4.addEventListener('click', ()=>{
          let filterCheck4 = products.filter( el => el.price > 600 && el.price <= 1000).sort((a,b) => a.price - b.price);
          showProds(filterCheck4);
        })

        let priceCheck5 = document.querySelector('#priceCheck5')
        priceCheck5.addEventListener('click', ()=>{
          showProds(products);
        })


        function showProds(prods) {
          productsWrapper.innerHTML = '';
          prods.forEach(el => {
            let cardAnuncio = document.createElement('div')
            cardAnuncio.classList.add('col-12', 'col-md-4', 'mb-4')
            cardAnuncio.innerHTML =
              `
                <div class="card card-annuncement mx-auto shadow">
                  <div class="card-body">
                    <p class="card-title text-main lead" title="${el.name}">${el.name.substring(0,12)} ...</p>
                    <p class="card-text text-sec">${el.category}</p>
                    <p class="card-text text-sec">${el.price} €</p>
                  </div>
                  <button class="btn-custom text-decoration-none border-0 d-block mx-auto mb-3">compra<i class="fas fa-hand-point-up ms-2"></i></button>
                </div>
              `
            productsWrapper.appendChild(cardAnuncio)
          })
        }
        showProds(products);
      })
  </script>

</body>

</html>